<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disparador WhatsApp - Evolution API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f5f5f5;
            border: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab.active {
            background: white;
            color: #25D366;
            border-bottom: 3px solid #25D366;
        }

        .tab:hover {
            background: #e8e8e8;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #25D366;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 600;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #25D366;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: #25D366;
            color: white;
        }

        .btn-primary:hover {
            background: #1ea952;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        .btn-secondary {
            background: #667eea;
            color: white;
        }

        .btn-secondary:hover {
            background: #5568d3;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-badge.connected {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.disconnected {
            background: #f8d7da;
            color: #721c24;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
        }

        .alert.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .contacts-list {
            max-height: 300px;
            overflow-y: auto;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #f9f9f9;
        }

        .contact-item {
            padding: 10px;
            background: white;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 3px solid #25D366;
        }

        .progress-container {
            display: none;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #25D366 0%, #128C7E 100%);
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .log-container {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }

        .log-item {
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 5px;
            font-size: 13px;
            font-family: 'Courier New', monospace;
        }

        .log-item.success {
            background: #d4edda;
            color: #155724;
        }

        .log-item.error {
            background: #f8d7da;
            color: #721c24;
        }

        .log-item.info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .hidden {
            display: none;
        }

        .file-upload {
            border: 2px dashed #25D366;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload:hover {
            background: #f0f9f4;
            border-color: #128C7E;
        }

        .file-upload input {
            display: none;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📱 WhatsApp Business - Disparador em Massa</h1>
            <p>Powered by Evolution API</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('config')">🔧 Configuração</button>
            <button class="tab" onclick="showTab('contacts')">👥 Contatos</button>
            <button class="tab" onclick="showTab('message')">💬 Mensagem</button>
            <button class="tab" onclick="showTab('send')">🚀 Enviar</button>
        </div>

        <div class="content">
            <!-- ABA 1: CONFIGURAÇÃO -->
            <div id="tab-config" class="tab-content">
                <div class="section">
                    <div class="section-title">
                        🔌 Conexão com Evolution API
                        <span id="connectionBadge" class="status-badge disconnected">Desconectado</span>
                    </div>
                    
                    <div id="configAlert" class="alert"></div>

                    <div class="form-group">
                        <label>URL da API:</label>
                        <input type="text" id="apiUrl" value="https://evoapi.automacaocomia.pro" placeholder="https://sua-api.com">
                    </div>

                    <div class="form-group">
                        <label>Nome da Instância:</label>
                        <input type="text" id="instanceName" value="atendimento" placeholder="nome-da-instancia">
                    </div>

                    <div class="form-group">
                        <label>API Key:</label>
                        <input type="text" id="apiKey" value="708B54318A4B-4E36-8D07-D8E68FB84AA8" placeholder="sua-chave-api">
                    </div>

                    <button class="btn btn-primary" onclick="testConnection()">🔌 Testar Conexão</button>
                </div>
            </div>

            <!-- ABA 2: CONTATOS -->
            <div id="tab-contacts" class="tab-content hidden">
                <div class="section">
                    <div class="section-title">📋 Origem dos Contatos</div>
                    
                    <div id="contactsAlert" class="alert"></div>

                    <div class="form-group">
                        <label>Escolha a origem:</label>
                        <select id="contactSource" onchange="changeContactSource()">
                            <option value="api-contacts">📱 Apenas Contatos</option>
                            <option value="api-chats">💬 Apenas Conversas</option>
                            <option value="api-both">🔄 Contatos + Conversas</option>
                            <option value="spreadsheet">📊 Upload de Planilha</option>
                            <option value="manual">✍️ Inserir Manualmente</option>
                        </select>
                    </div>

                    <!-- Modo API -->
                    <div id="apiContactsMode">
                        <button class="btn btn-primary" onclick="fetchContacts()">📥 Buscar Contatos</button>
                        <button class="btn btn-secondary" onclick="selectAllContacts()">✅ Selecionar Todos</button>
                        <button class="btn btn-danger" onclick="clearSelection()">🗑️ Limpar Seleção</button>
                        
                        <div style="margin-top: 15px;">
                            <input type="text" id="searchContact" placeholder="🔍 Buscar contato..." onkeyup="filterContacts()" style="margin-bottom: 10px;">
                        </div>

                        <div id="contactsList" class="contacts-list" style="margin-top: 15px;">
                            <p style="text-align: center; color: #999;">Clique em "Buscar Contatos" para carregar</p>
                        </div>
                    </div>

                    <!-- Modo Planilha -->
                    <div id="spreadsheetMode" class="hidden">
                        <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                            <input type="file" id="fileInput" accept=".csv" onchange="handleFileUpload(event)">
                            <p style="font-size: 48px; margin-bottom: 10px;">📄</p>
                            <p style="font-weight: 600; margin-bottom: 5px;">Clique para selecionar arquivo CSV</p>
                            <p style="font-size: 13px; color: #666;">Formato: numero,nome (um por linha)</p>
                        </div>
                        <div id="fileInfo" style="margin-top: 15px; font-weight: 600; color: #25D366;"></div>
                    </div>

                    <!-- Modo Manual -->
                    <div id="manualMode" class="hidden">
                        <div class="form-group">
                            <label>Números (um por linha, com DDI):</label>
                            <textarea id="manualNumbers" placeholder="5511999999999
5511888888888
5511777777777" rows="10"></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="loadManualNumbers()">✅ Carregar Números</button>
                    </div>
                </div>
            </div>

            <!-- ABA 3: MENSAGEM -->
            <div id="tab-message" class="tab-content hidden">
                <div class="section">
                    <div class="section-title">💬 Configurar Mensagem</div>

                    <div class="form-group">
                        <label>Texto da Mensagem:</label>
                        <textarea id="messageText" placeholder="Digite sua mensagem aqui..." rows="6"></textarea>
                    </div>

                    <div class="form-group">
                        <label>URL da Mídia (opcional):</label>
                        <input type="text" id="mediaUrl" placeholder="https://exemplo.com/imagem.jpg">
                        <small style="color: #666; display: block; margin-top: 5px;">
                            ℹ️ Suporta imagens, vídeos e documentos
                        </small>
                    </div>

                    <div class="form-group">
                        <label>Delay entre mensagens (segundos):</label>
                        <input type="number" id="delaySeconds" value="3" min="1" max="60">
                    </div>
                </div>
            </div>

            <!-- ABA 4: ENVIAR -->
            <div id="tab-send" class="tab-content hidden">
                <div class="section">
                    <div class="section-title">🚀 Iniciar Envio</div>

                    <div id="sendAlert" class="alert"></div>

                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">📊 Resumo do Envio:</h3>
                        <p><strong>Contatos selecionados:</strong> <span id="summaryContacts">0</span></p>
                        <p><strong>Mensagem:</strong> <span id="summaryMessage">Não configurada</span></p>
                        <p><strong>Mídia:</strong> <span id="summaryMedia">Nenhuma</span></p>
                        <p><strong>Delay:</strong> <span id="summaryDelay">3s</span></p>
                    </div>

                    <button class="btn btn-primary" onclick="startSending()" id="sendBtn" style="font-size: 18px; padding: 15px 40px;">
                        🚀 INICIAR ENVIO EM MASSA
                    </button>

                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill">0%</div>
                        </div>
                        <div class="log-container" id="logContainer"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== VARIÁVEIS GLOBAIS ==========
        let allContacts = [];
        let selectedContacts = [];
        let isConnected = false;

        // ========== FUNÇÕES DE NAVEGAÇÃO ==========
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById('tab-' + tabName).classList.remove('hidden');
            event.target.classList.add('active');

            if (tabName === 'send') {
                updateSummary();
            }
        }

        // ========== FUNÇÕES DE CONEXÃO ==========
        async function testConnection() {
            const apiUrl = document.getElementById('apiUrl').value.trim();
            const instanceName = document.getElementById('instanceName').value.trim();
            const apiKey = document.getElementById('apiKey').value.trim();

            if (!apiUrl || !instanceName || !apiKey) {
                showAlert('configAlert', '⚠️ Preencha todos os campos!', 'error');
                return;
            }

            showAlert('configAlert', '🔄 Testando conexão...', 'info');

            try {
                const response = await fetch(`${apiUrl}/instance/connectionState/${instanceName}`, {
                    method: 'GET',
                    headers: {
                        'apikey': apiKey
                    }
                });

                const data = await response.json();
                console.log('Resposta da conexão:', data);

                if (response.ok) {
                    isConnected = true;
                    document.getElementById('connectionBadge').className = 'status-badge connected';
                    document.getElementById('connectionBadge').textContent = 'Conectado ✓';
                    showAlert('configAlert', `✅ Conectado com sucesso! Status: ${data.state || 'OK'}`, 'success');
                } else {
                    throw new Error(data.message || 'Erro na conexão');
                }
            } catch (error) {
                isConnected = false;
                document.getElementById('connectionBadge').className = 'status-badge disconnected';
                document.getElementById('connectionBadge').textContent = 'Desconectado ✗';
                showAlert('configAlert', `❌ Erro: ${error.message}`, 'error');
            }
        }

        // ========== FUNÇÕES DE CONTATOS ==========
        function changeContactSource() {
            const source = document.getElementById('contactSource').value;
            
            document.getElementById('apiContactsMode').classList.add('hidden');
            document.getElementById('spreadsheetMode').classList.add('hidden');
            document.getElementById('manualMode').classList.add('hidden');

            if (source.startsWith('api-')) {
                document.getElementById('apiContactsMode').classList.remove('hidden');
            } else if (source === 'spreadsheet') {
                document.getElementById('spreadsheetMode').classList.remove('hidden');
            } else if (source === 'manual') {
                document.getElementById('manualMode').classList.remove('hidden');
            }
        }

        async function fetchContacts() {
            if (!isConnected) {
                showAlert('contactsAlert', '⚠️ Teste a conexão primeiro!', 'error');
                return;
            }

            const apiUrl = document.getElementById('apiUrl').value.trim();
            const instanceName = document.getElementById('instanceName').value.trim();
            const apiKey = document.getElementById('apiKey').value.trim();
            const source = document.getElementById('contactSource').value;

            showAlert('contactsAlert', '🔄 Buscando contatos...', 'info');
            allContacts = [];

            try {
                // Buscar contatos
                if (source === 'api-contacts' || source === 'api-both') {
                    try {
                        const contactsResponse = await fetch(`${apiUrl}/chat/findContacts/${instanceName}`, {
                            method: 'POST',
                            headers: {
                                'apikey': apiKey
                            }
                        });

                        if (contactsResponse.ok) {
                            const contactsData = await contactsResponse.json();
                            console.log('Contatos recebidos:', contactsData);
                            
                            if (Array.isArray(contactsData) && contactsData.length > 0) {
                                contactsData.forEach(contact => {
                                    const number = contact.id.split('@')[0];
                                    allContacts.push({
                                        number: number,
                                        name: contact.pushName || contact.name || number,
                                        type: 'contact'
                                    });
                                });
                            }
                        }
                    } catch (error) {
                        console.log('Erro ao buscar contatos:', error);
                    }
                }

                // Buscar conversas (chats)
                if (source === 'api-chats' || source === 'api-both') {
                    try {
                        const chatsResponse = await fetch(`${apiUrl}/chat/findChats/${instanceName}`, {
                            method: 'POST',
                            headers: {
                                'apikey': apiKey
                            }
                        });

                        if (chatsResponse.ok) {
                            const chatsData = await chatsResponse.json();
                            console.log('Conversas recebidas:', chatsData);
                            
                            if (Array.isArray(chatsData) && chatsData.length > 0) {
                                chatsData.forEach(chat => {
                                    const number = chat.id.split('@')[0];
                                    // Não adicionar grupos
                                    if (!chat.id.includes('@g.us')) {
                                        allContacts.push({
                                            number: number,
                                            name: chat.name || number,
                                            type: 'chat'
                                        });
                                    }
                                });
                            }
                        }
                    } catch (error) {
                        console.log('Erro ao buscar chats:', error);
                    }
                }

                // Remover duplicatas
                allContacts = allContacts.filter((contact, index, self) =>
                    index === self.findIndex(c => c.number === contact.number)
                );

                if (allContacts.length > 0) {
                    showAlert('contactsAlert', `✅ ${allContacts.length} contatos encontrados!`, 'success');
                    renderContacts();
                } else {
                    showAlert('contactsAlert', '⚠️ Nenhum contato encontrado. Verifique se há conversas no WhatsApp.', 'error');
                    document.getElementById('contactsList').innerHTML = '<p style="text-align: center; color: #999;">Nenhum contato encontrado</p>';
                }
            } catch (error) {
                showAlert('contactsAlert', `❌ Erro: ${error.message}`, 'error');
                console.error('Erro completo:', error);
            }
        }

        function renderContacts() {
            const container = document.getElementById('contactsList');
            container.innerHTML = '';

            allContacts.forEach((contact, index) => {
                const div = document.createElement('div');
                div.className = 'contact-item';
                div.innerHTML = `
                    <div>
                        <strong>${contact.name}</strong>
                        <br>
                        <small style="color: #666;">${contact.number} ${contact.type === 'chat' ? '💬' : '📱'}</small>
                    </div>
                    <input type="checkbox" onchange="toggleContact(${index})" id="contact-${index}">
                `;
                container.appendChild(div);
            });
        }

        function toggleContact(index) {
            const contact = allContacts[index];
            const checkbox = document.getElementById(`contact-${index}`);

            if (checkbox.checked) {
                if (!selectedContacts.find(c => c.number === contact.number)) {
                    selectedContacts.push(contact);
                }
            } else {
                selectedContacts = selectedContacts.filter(c => c.number !== contact.number);
            }

            console.log('Selecionados:', selectedContacts.length);
        }

        function selectAllContacts() {
            selectedContacts = [...allContacts];
            allContacts.forEach((_, index) => {
                const checkbox = document.getElementById(`contact-${index}`);
                if (checkbox) checkbox.checked = true;
            });
            showAlert('contactsAlert', `✅ ${selectedContacts.length} contatos selecionados!`, 'success');
        }

        function clearSelection() {
            selectedContacts = [];
            allContacts.forEach((_, index) => {
                const checkbox = document.getElementById(`contact-${index}`);
                if (checkbox) checkbox.checked = false;
            });
            showAlert('contactsAlert', '🗑️ Seleção limpa', 'info');
        }

        function filterContacts() {
            const search = document.getElementById('searchContact').value.toLowerCase();
            const items = document.querySelectorAll('.contact-item');

            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(search) ? 'flex' : 'none';
            });
        }

        // ========== FUNÇÕES DE PLANILHA ==========
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                parseCSV(content);
            };
            reader.readAsText(file);
        }

        function parseCSV(content) {
            const lines = content.split('\n');
            allContacts = [];
            selectedContacts = [];

            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    const parts = line.split(',');
                    const number = parts[0].replace(/\D/g, '');
                    if (number) {
                        const contact = {
                            number: number,
                            name: parts[1] || number,
                            type: 'csv'
                        };
                        allContacts.push(contact);
                        selectedContacts.push(contact);
                    }
                }
            }

            document.getElementById('fileInfo').textContent = `✅ ${selectedContacts.length} números carregados`;
            showAlert('contactsAlert', `✅ ${selectedContacts.length} números carregados da planilha!`, 'success');
        }

        // ========== FUNÇÕES DE MANUAL ==========
        function loadManualNumbers() {
            const text = document.getElementById('manualNumbers').value.trim();
            const lines = text.split('\n');
            
            allContacts = [];
            selectedContacts = [];

            lines.forEach(line => {
                const number = line.trim().replace(/\D/g, '');
                if (number) {
                    const contact = {
                        number: number,
                        name: number,
                        type: 'manual'
                    };
                    allContacts.push(contact);
                    selectedContacts.push(contact);
                }
            });

            showAlert('contactsAlert', `✅ ${selectedContacts.length} números carregados!`, 'success');
        }

        // ========== FUNÇÕES DE ENVIO ==========
        function updateSummary() {
            document.getElementById('summaryContacts').textContent = selectedContacts.length;
            
            const message = document.getElementById('messageText').value.trim();
            document.getElementById('summaryMessage').textContent = message ? message.substring(0, 50) + '...' : 'Não configurada';
            
            const media = document.getElementById('mediaUrl').value.trim();
            document.getElementById('summaryMedia').textContent = media ? 'Sim' : 'Nenhuma';
            
            const delay = document.getElementById('delaySeconds').value;
            document.getElementById('summaryDelay').textContent = delay + 's';
        }

        async function startSending() {
            if (selectedContacts.length === 0) {
                showAlert('sendAlert', '⚠️ Selecione pelo menos um contato!', 'error');
                return;
            }

            const message = document.getElementById('messageText').value.trim();
            const mediaUrl = document.getElementById('mediaUrl').value.trim();

            if (!message && !mediaUrl) {
                showAlert('sendAlert', '⚠️ Digite uma mensagem ou adicione uma mídia!', 'error');
                return;
            }

            const apiUrl = document.getElementById('apiUrl').value.trim();
            const instanceName = document.getElementById('instanceName').value.trim();
            const apiKey = document.getElementById('apiKey').value.trim();
            const delay = parseInt(document.getElementById('delaySeconds').value) * 1000;

            document.getElementById('sendBtn').disabled = true;
            document.getElementById('progressContainer').style.display = 'block';
            document.getElementById('logContainer').innerHTML = '';

            let successCount = 0;
            let errorCount = 0;

            for (let i = 0; i < selectedContacts.length; i++) {
                const contact = selectedContacts[i];
                const progress = ((i + 1) / selectedContacts.length * 100).toFixed(0);

                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressFill').textContent = progress + '%';

                try {
                    const payload = {
                        number: contact.number
                    };

                    if (message) {
                        payload.text = message;
                    }

                    if (mediaUrl) {
                        payload.mediaUrl = mediaUrl;
                    }

                    const response = await fetch(`${apiUrl}/message/sendText/${instanceName}`, {
                        method: 'POST',
                        headers: {
                            'apikey': apiKey,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        successCount++;
                        addLog(`✅ Enviado para ${contact.name} (${contact.number})`, 'success');
                    } else {
                        throw new Error('Falha no envio');
                    }
                } catch (error) {
                    errorCount++;
                    addLog(`❌ Erro ao enviar para ${contact.name}: ${error.message}`, 'error');
                }

                if (i < selectedContacts.length - 1) {
                    await sleep(delay);
                }
            }

            addLog(`\n📊 RESUMO FINAL: ${successCount} enviados com sucesso, ${errorCount} erros`, 'info');
            showAlert('sendAlert', `✅ Envio concluído! ${successCount} sucessos, ${errorCount} erros`, 'success');
            document.getElementById('sendBtn').disabled = false;
        }

        // ========== FUNÇÕES AUXILIARES ==========
        function showAlert(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `alert ${type}`;
            element.style.display = 'block';
        }

        function addLog(message, type) {
            const container = document.getElementById('logContainer');
            const item = document.createElement('div');
            item.className = `log-item ${type}`;
            item.textContent = message;
            container.appendChild(item);
            container.scrollTop = container.scrollHeight;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>
